<aside
  class="fixed md:static top-2 md:top-0 left-0 transform transition-transform duration-300 ease-in-out z-40 w-80 [height:calc(100vh-4rem)] md:h-auto"
  [class.-translate-x-full]="!isOpen"
  [class.translate-x-0]="isOpen"
>
  <div class="p-4 h-full">
    <div class="flex justify-between items-center mb-4">
      <h3 class="text-xl font-semibold text-gray-800">Sidebar</h3>
      <button class="md:hidden text-gray-500 hover:text-gray-700" (click)="closeSidebar()">
        <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M6 18L18 6M6 6l12 12"
          />
        </svg>
      </button>
    </div>
    <div class="p-4 h-full">
      <ul class="space-y-2">
        @for (item of navItems; track item.id) {
          <li>
            @if (!item.hasChildren) {
              <a
                [routerLink]="item.route"
                routerLinkActive="active"
                [routerLinkActiveOptions]="{ exact: true }"
                class="flex items-center px-4 py-2 rounded-lg hover:bg-gray-200 transition-colors duration-150"
                (click)="closeSidebar()"
              >
                <i class="{{ item.icon }} mr-3"></i>
                {{ item.title }}
              </a>
            }

            @if (item.hasChildren) {
              <div
                [routerLink]="item.route"
                routerLinkActive="active"
                [routerLinkActiveOptions]="{ exact: false }"
                class="flex justify-between items-center px-4 py-2 rounded-lg cursor-pointer hover:bg-gray-200 transition-colors duration-150"
                (click)="toggleSubmenu(item)"
              >
                <div class="flex items-center">
                  <i class="{{ item.icon }} mr-3"></i>
                  {{ item.title }}
                </div>
                <i
                  class="ri-arrow-down-s-line transition-transform duration-300"
                  [class.-rotate-180]="isSubmenuOpen(item)"
                ></i>
              </div>

              @if (isSubmenuOpen(item)) {
                <ul
                  class="ml-4 mt-2 space-y-2 overflow-hidden transition-all duration-300 ease-in-out"
                >
                  @for (child of item.childrens; track child.id) {
                    <li>
                      <a
                        [routerLink]="child.route"
                        routerLinkActive="active"
                        [routerLinkActiveOptions]="{ exact: true }"
                        class="flex items-center pl-8 pr-4 py-2 rounded-lg text-sm hover:bg-gray-200 transition-colors duration-150"
                        (click)="closeSidebar()"
                      >
                        {{ child.title }}
                      </a>
                    </li>
                  }
                </ul>
              }
            }
          </li>
        }
      </ul>
    </div>
  </div>
</aside>
