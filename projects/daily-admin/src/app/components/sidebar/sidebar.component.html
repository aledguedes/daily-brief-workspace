<aside
  class="h-full w-full bg-white shadow-lg transition-transform duration-300 ease-in-out z-40 overflow-y-auto"
>
  <nav class="p-4">
    <ul class="space-y-2">
      @for (item of navItems; track item) {
        @if (!item.hasChildren) {
          <li>
            <a
              [routerLink]="item.route"
              (click)="closeMenuOnNavigate()"
              routerLinkActive="bg-indigo-50 text-indigo-600"
              [routerLinkActiveOptions]="{ exact: true }"
              class="flex items-center space-x-3 px-4 py-3 text-gray-700 rounded-lg hover:bg-indigo-100 transition"
            >
              <i class="text-indigo-600 text-lg" [class]="item.icon"></i>
              <span class="font-medium">{{ item.title }}</span>
            </a>
          </li>
        }

        @if (item.hasChildren) {
          <li>
            <button
              (click)="toggleMenu(item)"
              class="menu-item w-full flex items-center justify-between px-4 py-3 text-gray-700 hover:bg-gray-50 rounded-lg transition"
            >
              <div class="flex items-center space-x-3">
                <i class="text-gray-600 text-lg" [class]="item.icon"></i>
                <span>{{ item.title }}</span>
              </div>
              <i
                class="fas fa-chevron-down text-sm transition-transform"
                [class.rotate-90]="item.isOpen"
              ></i>
            </button>

            <ul
              [class.hidden]="!item.isOpen"
              class="submenu ml-6 mt-1 space-y-1 border-l-2 border-gray-200 pl-2"
            >
              @for (child of item.childrens; track child) {
                <li>
                  <a
                    [routerLink]="child.route"
                    (click)="closeMenuOnNavigate()"
                    routerLinkActive="text-indigo-600 bg-indigo-50"
                    class="block px-4 py-2 text-sm text-gray-600 hover:text-indigo-600 hover:bg-indigo-50 rounded transition"
                  >
                    {{ child.title }}
                  </a>
                </li>
              }
            </ul>
          </li>
        }
      }
    </ul>
  </nav>
</aside>
