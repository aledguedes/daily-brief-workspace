<aside
  #asideRef
  class="fixed inset-y-0 left-0 z-40 flex flex-col h-full transition-all duration-300 bg-white shadow-lg"
  [ngClass]="{
    'w-64': !isEffectivelyCollapsed(),
    'w-16': isEffectivelyCollapsed(),
    'translate-x-0': isSidebarOpen() || isDesktop(),
    '-translate-x-full': !isSidebarOpen() && !isDesktop(),
  }"
  (mouseenter)="onMouseEnter()"
  (mouseleave)="onMouseLeave()"
>
  <div class="flex-1 overflow-y-auto" [ngClass]="{ 'px-3 py-4': !isEffectivelyCollapsed() }">
    <ul class="space-y-2">
      @for (item of navItems; track item.id) {
        @if (!item.hasChildren) {
          <li>
            <a
              [routerLink]="item.route"
              routerLinkActive="bg-gray-100"
              class="flex items-center p-2 text-gray-900 rounded-lg hover:bg-gray-100"
              (click)="closeMenuOnNavigate()"
            >
              <i [ngClass]="item.icon" class="w-6 h-6 text-gray-500"></i>
              @if (!isEffectivelyCollapsed()) {
                <span class="ml-3">{{ item.title }}</span>
                @if (item.badgeCount && item.badgeCount > 0) {
                  <span
                    class="ml-auto inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-red-600 rounded-full"
                  >
                    {{ item.badgeCount }}
                  </span>
                }
              }
            </a>
          </li>
        }
        @if (item.hasChildren) {
          <li>
            <button
              type="button"
              class="flex items-center w-full p-2 text-gray-900 rounded-lg hover:bg-gray-100"
              (click)="toggleMenu(item)"
            >
              <i [ngClass]="item.icon" class="w-6 h-6 text-gray-500"></i>
              @if (!isEffectivelyCollapsed()) {
                <span class="ml-3">{{ item.title }}</span>
                @if (item.badgeCount && item.badgeCount > 0) {
                  <span
                    class="ml-auto inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-red-600 rounded-full"
                  >
                    {{ item.badgeCount }}
                  </span>
                }
                <i
                  class="ml-auto w-4 h-4"
                  [ngClass]="item.isOpen ? 'fas fa-chevron-down' : 'fas fa-chevron-right'"
                ></i>
              }
            </button>
            @if (item.isOpen && !isEffectivelyCollapsed()) {
              <ul class="py-2 space-y-2">
                @for (child of item.childrens; track child.id) {
                  <li>
                    <a
                      [routerLink]="child.route"
                      routerLinkActive="bg-gray-100"
                      class="flex items-center w-full p-2 pl-11 text-gray-900 rounded-lg hover:bg-gray-100"
                      (click)="closeMenuOnNavigate()"
                    >
                      {{ child.title }}
                      @if (child.badgeCount && child.badgeCount > 0) {
                        <span
                          class="ml-auto inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-red-600 rounded-full"
                        >
                          {{ child.badgeCount }}
                        </span>
                      }
                    </a>
                  </li>
                }
              </ul>
            }
          </li>
        }
      }
    </ul>
  </div>
</aside>
