<header class="bg-white shadow-sm fixed w-full top-0 z-50">
  <div class="flex items-center justify-between px-4 py-3">
    <div class="flex items-center space-x-4">
      <button (click)="toggleMenu()" class="lg:hidden text-gray-600 hover:text-gray-900">
        <i class="fas fa-bars text-xl"></i>
      </button>
      <button
        (click)="toggleCollapse.emit()"
        class="hidden lg:block text-gray-600 hover:text-gray-900 transition"
      >
        <i class="fas fa-indent text-xl"></i>
      </button>
      <h1 class="text-xl font-bold text-indigo-600">TechBlog Admin</h1>
    </div>

    <div class="flex items-center space-x-4">
      <div class="relative">
        <button
          (click)="toggleNotificationDropdown($event)"
          class="text-gray-600 hover:text-gray-900 relative p-1 rounded-full hover:bg-gray-100 transition"
        >
          <i class="fas fa-bell text-xl"></i>
          <span
            class="absolute -top-0 -right-0.5 bg-red-500 text-white text-xs font-bold rounded-full w-4 h-4 flex items-center justify-center border border-white"
            >{{ newNotificationsCount }}</span
          >
        </button>

        @if (isNotificationOpen) {
          <div
            class="absolute right-0 mt-3 w-72 md:w-80 bg-white rounded-xl shadow-2xl z-50 ring-1 ring-gray-100 divide-y divide-gray-100 transform origin-top-right"
          >
            <div class="px-4 pt-4 pb-2">
              <h3 class="text-md font-semibold text-gray-800">Notificações</h3>
              <p class="text-xs text-indigo-600 font-medium">{{ newNotificationsCount }} novas</p>
            </div>

            <div class="border-t border-gray-100 mx-4"></div>

            <ul class="py-2 space-y-1">
              @for (notification of notifications; track notification.id) {
                <li
                  class="flex items-start px-4 py-2 hover:bg-indigo-50/50 cursor-pointer transition duration-150 ease-in-out"
                >
                  <i
                    class="text-lg flex-shrink-0 mt-1 mr-3"
                    [class]="notification.icon"
                    [class]="notification.iconColor"
                  ></i>
                  <div>
                    <p class="text-sm font-medium text-gray-800 leading-snug">
                      {{ notification.message }}
                    </p>
                    <p class="text-xs text-gray-500">{{ notification.time }}</p>
                  </div>
                </li>
              }
            </ul>

            <a
              href="#"
              class="block text-center py-3 text-sm font-medium text-indigo-600 hover:bg-gray-50 rounded-b-xl border-t border-gray-100"
              >Ver todas as notificações</a
            >
          </div>
        }
      </div>

      <div class="relative">
        <button
          (click)="toggleUserMenu($event)"
          class="flex items-center space-x-2 p-1 rounded-full hover:bg-gray-100 transition"
        >
          <img
            src="https://ui-avatars.com/api/?name=Admin&background=6366f1&color=fff"
            alt="Avatar"
            class="w-8 h-8 rounded-full"
          />
          <span class="hidden md:inline text-sm font-medium text-gray-700">Admin</span>
        </button>

        @if (isUserMenuOpen) {
          <div
            class="absolute right-0 mt-3 w-48 bg-white rounded-xl shadow-2xl z-50 ring-1 ring-gray-100 transform origin-top-right"
          >
            <ul class="py-2">
              @for (item of userMenuItems; track item.id) {
                <li>
                  <a
                    [routerLink]="item.route"
                    (click)="isUserMenuOpen = false"
                    [class.text-red-600]="item.label === 'Sair'"
                    class="flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-indigo-50/50 hover:text-indigo-600 transition duration-150 ease-in-out"
                  >
                    <i
                      class="text-lg mr-3"
                      [class]="item.icon"
                      [class.text-red-500]="item.label === 'Sair'"
                      [class.text-indigo-500]="item.label !== 'Sair'"
                    ></i>

                    {{ item.label }}
                  </a>
                </li>
              }
            </ul>
          </div>
        }
      </div>
    </div>
  </div>
</header>
